# 设计模式模块

本模块演示了常见设计模式的实现和应用，包括工厂模式、策略模式和责任链模式。

## 工厂模式

工厂模式是一种创建型设计模式，提供了一种创建对象的最佳方式。在工厂模式中，我们在创建对象时不会对客户端暴露创建逻辑，并且是通过使用一个共同的接口来指向新创建的对象。

本模块实现了三种工厂模式：

### 1. 简单工厂模式

- 定义：由一个工厂类根据传入的参数，动态决定应该创建哪一个产品类的实例。
- 实现：`SimplePaymentFactory` 根据支付类型创建不同的支付服务。
- 优点：将对象的创建和使用分离，客户端无需知道具体实现类。
- 缺点：工厂类职责过重，违反单一职责原则；增加新产品需要修改工厂类代码，违反开闭原则。

### 2. 工厂方法模式

- 定义：定义一个创建对象的接口，但由子类决定要实例化的类是哪一个。工厂方法让类的实例化推迟到子类中进行。
- 实现：`PaymentFactory` 接口及其实现类 `AliPayFactory`、`WeChatPayFactory`、`UnionPayFactory`。
- 优点：遵循开闭原则，新增产品只需添加对应工厂实现类；遵循单一职责原则，每个工厂只负责创建对应产品。
- 缺点：类的个数容易过多，增加复杂度；增加了系统的抽象性和理解难度。

### 3. 抽象工厂模式

- 定义：提供一个创建一系列相关或相互依赖对象的接口，而无需指定它们具体的类。
- 实现：`PaymentFactory` 接口及其实现类，可以创建支付API和退款API。
- 优点：分离了具体的产品和客户端；一个工厂可以创建多个产品族；增加新的产品族很方便。
- 缺点：增加新的产品等级结构麻烦，需要修改抽象工厂和所有的具体工厂类；产品族扩展困难。

## 策略模式

策略模式是一种行为型设计模式，它定义了一系列的算法，并将每个算法封装起来，使它们可以相互替换，且算法的变化不会影响使用算法的客户。

### 实现

- 策略接口：`DiscountStrategy` 定义了计算折扣的方法。
- 具体策略：`NoDiscountStrategy`、`FixedDiscountStrategy`、`PercentageDiscountStrategy`、`VipDiscountStrategy`。
- 上下文：`DiscountContext` 持有一个策略对象，并可以动态切换策略。

### 优点

1. 算法可以自由切换
2. 避免使用多重条件判断
3. 扩展性良好，增加新的策略只需实现接口

### 缺点

1. 客户端必须知道所有的策略类，并自行决定使用哪一个策略类
2. 策略模式会造成很多的策略类

## 责任链模式

责任链模式是一种行为型设计模式，它为请求创建了一个接收者对象的链。这种模式给予请求的类型，对请求的发送者和接收者进行解耦。

### 实现

- 抽象处理者：`Approver` 定义了处理请求的接口和设置下一个处理者的方法。
- 具体处理者：`TeamLeader`、`DepartmentManager`、`CEO`、`BoardOfDirectors`，每个处理者有不同的审批额度。
- 请求对象：`ApprovalRequest` 包含请求的详细信息。

### 优点

1. 降低耦合度，一个对象无需知道是哪个对象处理其请求
2. 增强给对象指派职责的灵活性
3. 可以动态地添加或删除责任

### 缺点

1. 不能保证请求一定被处理
2. 系统性能会受到影响，特别是在链条很长的时候
3. 可能不容易观察运行时的特征，有碍于除错

## 如何运行测试

本模块包含了完整的单元测试，可以通过以下命令运行：

```bash
mvn test
```

或者在IDE中直接运行测试类：
- `FactoryPatternTest`
- `StrategyPatternTest`
- `ChainPatternTest` 